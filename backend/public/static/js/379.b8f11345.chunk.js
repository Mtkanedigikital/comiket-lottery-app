"use strict";(self.webpackChunklottery_frontend=self.webpackChunklottery_frontend||[]).push([[379],{1402:(e,t,n)=>{n.d(t,{B_:()=>a,TH:()=>s,ZU:()=>l,bC:()=>r,ll:()=>o});var i=n(2555);const r={maxWidth:600,width:"100%",margin:0,padding:16,boxSizing:"border-box"},a={border:"1px solid #eee",borderRadius:8,padding:12,marginBottom:16,width:"100%",boxSizing:"border-box",background:"#fff"},s={width:"100%",maxWidth:"100%",minWidth:0,padding:"8px 10px",minHeight:40,fontSize:16,borderRadius:6,boxSizing:"border-box"},o={padding:"12px 14px",minHeight:44,fontSize:16,lineHeight:"24px",borderRadius:8,cursor:"pointer",background:"#2563eb",color:"#ffffff",border:"1px solid #2563eb",textDecoration:"none",display:"inline-block"},l=((0,i.A)((0,i.A)({},o),{},{textDecoration:"none"}),{background:"#fef2f2",border:"1px solid #fecaca",color:"#991b1b",padding:12,borderRadius:8,margin:"8px 0"})},2768:(e,t,n)=>{n.d(t,{Fo:()=>m,GO:()=>p,K9:()=>a,cY:()=>c,ho:()=>h,iJ:()=>u,uU:()=>d,vL:()=>f});var i=n(2555);const r=n(9722).A.create({baseURL:"http://localhost:3001",timeout:1e4,withCredentials:!1}),a="distribution-lottery/admin/secret";async function s(e){let{method:t="GET",headers:n={},body:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=function(){try{return"undefined"===typeof localStorage?"":localStorage.getItem(a)||localStorage.getItem("ADMIN_SECRET")||""}catch(e){return""}}(),l=(0,i.A)((0,i.A)({},n||{}),o?{"x-admin-secret":o}:{});try{return(await r.request({url:e,method:t,headers:l,data:s})).data}catch(u){var c,d;const e=(null===u||void 0===u||null===(c=u.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.error)||(null===u||void 0===u?void 0:u.message)||String(u);throw new Error(e)}}const o=e=>new Promise(t=>setTimeout(t,e));async function l(e){let{retries:t=2,backoff:n=400}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=0;for(;;)try{return await e()}catch(a){var r;const e=null===a||void 0===a||null===(r=a.response)||void 0===r?void 0:r.status,s=!(null!==a&&void 0!==a&&a.response);if(i>=t||!(s||e>=500&&e<600))throw a;await o(n*Math.pow(2,i)),i+=1}}async function c(){return(await l(()=>r.get("/api/prizes"))).data}async function d(e){try{var t;const n=await r.get("/api/entries/count",{params:{prize_id:e}});if("number"===typeof(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.count))return n.data.count}catch(a){}try{var n;const t=await r.get("/api/entries",{params:{prize_id:e}});if(Array.isArray(t.data))return t.data.length;if(Array.isArray(null===(n=t.data)||void 0===n?void 0:n.items))return t.data.items.length}catch(a){}try{var i;const t=await r.get("/api/entries/".concat(encodeURIComponent(e)));if(Array.isArray(t.data))return t.data.length;if(Array.isArray(null===(i=t.data)||void 0===i?void 0:i.items))return t.data.items.length}catch(a){}return 0}async function u(e){var t,n;let{prizeId:i,prize_id:a,entryNumber:s,entry_number:o,password:l}=e;const c={prizeId:null!==(t=null!==i&&void 0!==i?i:a)&&void 0!==t?t:"",entryNumber:null!==(n=null!==s&&void 0!==s?s:o)&&void 0!==n?n:"",password:l};return(await r.post("/api/lottery/check",c)).data}async function p(e){let{id:t,name:n,result_time_jst:i}=e;return s("/api/prizes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,name:n,result_time_jst:i})})}async function m(e){return s("/api/prizes/".concat(encodeURIComponent(e),"/publish_now"),{method:"POST"})}async function h(e){let{prize_id:t,rows:n,onConflict:i}=e;return s("/api/entries/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prize_id:t,rows:n,onConflict:i})})}async function f(e){return s("/api/entries/upsert",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}},3379:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var i=n(2555),r=n(5043),a=n(5475),s=n(3245),o=n(8970);function l(e){try{if(!e||"string"!==typeof e)return"\u516c\u958b\u65e5: ".concat(null!==e&&void 0!==e?e:"");const[t,n]=e.trim().split(/\s+/),[i,r,a]=(t||"").split("-"),s=(n||"").slice(0,5);return i&&r&&a&&s?"\u516c\u958b\u65e5: ".concat(i,"/").concat(r,"/").concat(a," ").concat(s):"\u516c\u958b\u65e5: ".concat(e)}catch(t){return"\u516c\u958b\u65e5: ".concat(e)}}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;const t=(new Date).getTime()+324e5+60*e*1e3,n=new Date(t),i=n.getUTCFullYear(),r=String(n.getUTCMonth()+1).padStart(2,"0"),a=String(n.getUTCDate()).padStart(2,"0"),s=String(n.getUTCHours()).padStart(2,"0"),o=String(n.getUTCMinutes()).padStart(2,"0");return"".concat(i,"-").concat(r,"-").concat(a,"T").concat(s,":").concat(o)}var d=n(1402),u=n(579);function p(e){let{prize:t}=e;const n="".concat(window.location.origin,"/p?prizeId=").concat(encodeURIComponent(t.id));return(0,u.jsxs)("div",{style:{textAlign:"center"},children:[(0,u.jsx)(s.Ay,{value:n,size:128}),(0,u.jsx)("div",{style:{marginTop:8},children:(0,u.jsx)("button",{onClick:async()=>{try{const e=await o.dY(n,{errorCorrectionLevel:"M",margin:1,scale:8}),i=new Image;i.onload=()=>{const e=256,n=24,r=document.createElement("canvas");r.width=304,r.height=364;const a=r.getContext("2d");a.imageSmoothingEnabled=!1,a.fillStyle="#fff",a.fillRect(0,0,r.width,r.height);const s=(r.width-e)/2,o=(r.height-60-e)/2;a.drawImage(i,s,o,e,e),a.fillStyle="#000",a.font="14px 'Hiragino Sans','Noto Sans JP',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif";a.fillText("\u8cde\u54c1ID: ".concat(t.id),n,313),a.fillText(l(t.result_time_jst),n,331);const c=r.toDataURL("image/png"),d=document.createElement("a");d.href=c,d.download="qr_".concat(t.id,".png"),d.click()},i.onerror=()=>alert("QR\u306ePNG\u5909\u63db\u306b\u5931\u6557\u3057\u307e\u3057\u305f\uff08\u753b\u50cf\u8aad\u307f\u8fbc\u307f\u30a8\u30e9\u30fc\uff09"),i.src=e}catch(e){console.error("downloadQR error:",e),alert("QR\u306ePNG\u5909\u63db\u306b\u5931\u6557\u3057\u307e\u3057\u305f\uff08\u4f8b\u5916\uff09\u3002\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002")}},style:d.ll,children:"QR\u3092PNG\u4fdd\u5b58"})})]})}var m=n(2768);function h(e){let{published:t}=e;const n={display:"inline-block",fontSize:12,padding:"2px 8px",borderRadius:999,marginLeft:8,verticalAlign:"middle"};return t?(0,u.jsx)("span",{style:(0,i.A)((0,i.A)({},n),{},{color:"#14532d",background:"#dcfce7",border:"1px solid #86efac"}),children:"\u516c\u958b\u6e08\u307f"}):(0,u.jsx)("span",{style:(0,i.A)((0,i.A)({},n),{},{color:"#7c2d12",background:"#ffedd5",border:"1px solid #fdba74"}),children:"\u672a\u516c\u958b"})}var f=n(9809);const y="distribution-lottery/admin/unpublishedFirst";function g(e,t){if(e){const t=Date.parse(e);if(!Number.isNaN(t))return t<=Date.now()}if(t){const e=t.replace(/\//g,"-").replace(" ","T")+"+09:00",n=Date.parse(e);if(!Number.isNaN(n))return n<=Date.now()}return!1}function b(e){let{prizeId:t}=e;const[n,i]=r.useState(null);return r.useEffect(()=>{let e=!0;return(async()=>{try{const n=await(0,m.uU)(t);e&&i(Number.isFinite(n)?n:0)}catch(n){e&&i(0)}})(),()=>{e=!1}},[t]),(0,u.jsxs)("span",{style:{fontSize:12,color:"#374151",marginLeft:8},children:["\u53c2\u52a0\u8005\u6570: ",null==n?"\u2026":"".concat(n,"\u4ef6")]})}function x(){var e,t,n,s;const[o,x]=(0,r.useState)(null),[v,S]=(0,r.useState)(""),[j,w]=(0,r.useState)(()=>{const e=localStorage.getItem(y);return null===e||"true"===e}),[A,_]=(0,r.useState)(()=>localStorage.getItem(m.K9)||"");(0,r.useEffect)(()=>{localStorage.setItem(m.K9,A||"")},[A]),(0,r.useEffect)(()=>{localStorage.setItem(y,String(j))},[j]);const[z,T]=(0,r.useState)(""),[C,I]=(0,r.useState)(""),[k,P]=(0,r.useState)(()=>c(60)),[N,R]=(0,r.useState)(!1),[D,U]=(0,r.useState)(""),[E,F]=(0,r.useState)(""),[L,J]=(0,r.useState)(null),[B,H]=(0,r.useState)(!1),[O,M]=(0,r.useState)("ignore"),[G,Q]=(0,r.useState)(""),[W,V]=(0,r.useState)(""),[q,K]=(0,r.useState)(""),[Y,Z]=(0,r.useState)(""),[X,$]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(!1),[ne,ie]=(0,r.useState)(""),re=async()=>{try{const e=await(0,m.cY)();x(Array.isArray(e)?e:[]),S("")}catch(e){S(String((null===e||void 0===e?void 0:e.message)||e)),x([])}};(0,r.useEffect)(()=>{re()},[]);const[ae,se]=(0,r.useState)(null),oe=function(e){se({text:e,kind:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info"}),window.clearTimeout(oe._t),oe._t=window.setTimeout(()=>se(null),2200)},le=async e=>{if(J(null),E)if(e){Q(e.name),H(!0);try{var t,n,i;const r=function(e){const t=e.split(/\r?\n/).filter(Boolean);if(0===t.length)return[];const n=t[0].split(",").map(e=>e.trim()),i=n.indexOf("entry_number"),r=n.indexOf("password"),a=n.indexOf("is_winner"),s=[];for(let d=1;d<t.length;d++){var o,l,c;const e=t[d].split(","),n=(null!==(o=e[i])&&void 0!==o?o:"").trim(),u=(null!==(l=e[r])&&void 0!==l?l:"").trim(),p=(null!==(c=e[a])&&void 0!==c?c:"").trim().toLowerCase(),m=["true","1","yes","y","t"].includes(p);(n||u)&&s.push({entry_number:n,password:u,is_winner:m})}return s}(await e.text());if(0===r.length)throw new Error("CSV\u306e\u5185\u5bb9\u304c\u7a7a\u3067\u3059\u3002\u30d8\u30c3\u30c0\u884c\u3068\u30c7\u30fc\u30bf\u884c\u304c\u5fc5\u8981\u3067\u3059\u3002");const a=await(0,m.ho)({prize_id:E,rows:r,onConflict:O});J(a);const s="\u8ffd\u52a0:".concat(null!==(t=a.inserted)&&void 0!==t?t:0," \u66f4\u65b0:").concat(null!==(n=a.updated)&&void 0!==n?n:0," \u30b9\u30ad\u30c3\u30d7:").concat(null!==(i=a.skipped)&&void 0!==i?i:0);oe((0,f.A)("admin.toast.csvResult",s),"success")}catch(r){J({error:r.message}),oe((0,f.A)("admin.toast.csvFail"),"error")}finally{H(!1)}}else Q("");else alert("\u5148\u306b\u5bfe\u8c61\u306e\u8cde\u54c1ID\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002")},ce=(0,r.useMemo)(()=>Array.isArray(o)?o:[],[o]),de=(0,r.useMemo)(()=>{if(!Array.isArray(o))return[];const e=[...o];if(!j)return e;const t=e=>{const t=Date.parse(e.publish_time_utc||"");return Number.isNaN(t)?1/0:t};return e.sort((e,n)=>{const i=g(e.publish_time_utc,e.result_time_jst||e.publish_time_jst);return i!==g(n.publish_time_utc,n.result_time_jst||n.publish_time_jst)?i?1:-1:t(e)-t(n)})},[o,j]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("style",{children:'\n        input, select, button {\n          outline: none;\n        }\n        input:focus, select:focus, button:focus {\n          outline: 2px solid #93c5fd;\n          outline-offset: 2px;\n        }\n        /* iOS Safari \u306e\u65e5\u6642\u5165\u529b\u304c\u89aa\u67a0\u3092\u306f\u307f\u51fa\u3059\u5bfe\u7b56 */\n        input[type="datetime-local"] {\n          max-width: 100%;\n          width: 100%;\n          min-width: 0;\n          -webkit-appearance: none;\n          appearance: none;\n        }\n      '}),(0,u.jsxs)("div",{style:d.bC,children:[(0,u.jsx)("h2",{children:(0,f.A)("admin.title.prizeList")}),(0,u.jsx)("div",{style:{marginBottom:12},children:(0,u.jsxs)("label",{style:{userSelect:"none"},children:[(0,u.jsx)("input",{type:"checkbox",checked:j,onChange:e=>w(e.target.checked)}),"\xa0",(0,f.A)("admin.label.unpublishedFirst")]})}),(0,u.jsxs)("section",{style:d.B_,children:[(0,u.jsxs)("label",{style:{display:"block"},children:[(0,f.A)("admin.label.secret"),(0,u.jsx)("input",{type:"password",value:A,onChange:e=>_(e.target.value),placeholder:(0,f.A)("admin.placeholder.secret"),style:(0,i.A)((0,i.A)({},d.TH),{},{marginTop:8,maxWidth:360})})]}),(0,u.jsx)("div",{style:{fontSize:12,color:"#555",marginTop:6},children:(0,f.A)("admin.help.secret")})]}),v&&(0,u.jsxs)("div",{style:d.ZU,children:["\u30a8\u30e9\u30fc: ",v]}),(0,u.jsxs)("section",{style:d.B_,children:[(0,u.jsx)("h3",{children:(0,f.A)("admin.title.createPrize")}),(0,u.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),R(!0),U("");try{if(!z||!C||!k)throw new Error("ID/\u540d\u524d/\u516c\u958b\u65e5\u6642\u306f\u5fc5\u9808\u3067\u3059\u3002");const e=k.replace("T"," ");await(0,m.GO)({id:z.trim(),name:C.trim(),result_time_jst:e}),U((0,f.A)("admin.toast.createSuccess")),T(""),I(""),P(c(60)),await re()}catch(t){U("".concat((0,f.A)("common.errorPrefix")).concat(t.message))}finally{R(!1)}},style:{display:"grid",gap:8},children:[(0,u.jsxs)("label",{children:[(0,f.A)("admin.label.prizeId"),(0,u.jsx)("input",{value:z,onChange:e=>T(e.target.value),placeholder:(0,f.A)("admin.placeholder.prizeId"),required:!0,style:d.TH})]}),(0,u.jsxs)("label",{children:[(0,f.A)("admin.label.prizeName"),(0,u.jsx)("input",{value:C,onChange:e=>I(e.target.value),placeholder:(0,f.A)("admin.placeholder.prizeName"),required:!0,style:d.TH})]}),(0,u.jsxs)("label",{children:[(0,f.A)("admin.label.publishAt"),(0,u.jsx)("input",{type:"datetime-local",value:k,onChange:e=>P(e.target.value),required:!0,style:d.TH})]}),(0,u.jsx)("small",{style:{color:"#555"},children:(0,f.A)("admin.hint.defaultTime")}),(0,u.jsxs)("div",{children:[(0,u.jsx)("button",{type:"submit",disabled:N,style:d.ll,children:N?(0,f.A)("admin.button.creating"):(0,f.A)("admin.button.create")}),D&&(0,u.jsx)("span",{style:{marginLeft:8,fontSize:12},children:D})]})]})]}),(0,u.jsxs)("section",{style:d.B_,children:[(0,u.jsx)("h3",{children:(0,f.A)("admin.title.csvUpload")}),(0,u.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap",marginBottom:8},children:[(0,u.jsxs)("label",{children:[(0,f.A)("admin.label.targetPrizeId"),(0,u.jsxs)("select",{value:E,onChange:e=>F(e.target.value),style:(0,i.A)((0,i.A)({},d.TH),{},{marginLeft:8}),children:[(0,u.jsx)("option",{value:"",children:(0,f.A)("admin.option.selectPrize")}),ce.map(e=>(0,u.jsxs)("option",{value:e.id,children:[e.id," / ",e.name]},e.id))]})]}),(0,u.jsxs)("label",{children:[(0,f.A)("admin.label.conflictPolicy"),(0,u.jsxs)("select",{value:O,onChange:e=>M(e.target.value),style:(0,i.A)((0,i.A)({},d.TH),{},{marginLeft:8}),children:[(0,u.jsx)("option",{value:"ignore",children:(0,f.A)("admin.option.ignore")}),(0,u.jsx)("option",{value:"upsert",children:(0,f.A)("admin.option.upsert")})]})]}),(0,u.jsx)("input",{type:"file",accept:".csv,text/csv",disabled:B,onChange:e=>{var t;return le(null===(t=e.target.files)||void 0===t?void 0:t[0])}}),G&&(0,u.jsx)("span",{style:{fontSize:12,color:"#555"},children:G}),(0,u.jsx)("button",{type:"button",onClick:()=>{const e=new Blob(["entry_number,password,is_winner\n001,1111,true\n002,2222,false\n"],{type:"text/csv"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="entries_sample.csv",n.click(),URL.revokeObjectURL(t)},style:d.ll,children:(0,f.A)("admin.button.downloadSampleCsv")})]}),(0,u.jsxs)("div",{style:{fontSize:12,color:"#555",lineHeight:1.6},children:[(0,f.A)("admin.help.csvFormat"),(0,u.jsx)("pre",{style:{background:"#f7f7f7",padding:8,overflowX:"auto"},children:"entry_number,password,is_winner\n001,1111,true\n002,2222,false"})]}),B&&(0,u.jsx)("div",{children:(0,f.A)("admin.state.uploading")}),L&&!L.error&&(0,u.jsxs)("div",{style:{fontSize:13},children:["\u8ffd\u52a0: ",null!==(e=L.inserted)&&void 0!==e?e:0," / \u66f4\u65b0: ",null!==(t=L.updated)&&void 0!==t?t:0," / \u30b9\u30ad\u30c3\u30d7: ",null!==(n=L.skipped)&&void 0!==n?n:0,(null===(s=L.errors)||void 0===s?void 0:s.length)>0&&(0,u.jsxs)("details",{style:{marginTop:6},children:[(0,u.jsxs)("summary",{children:["\u8a73\u7d30\u30a8\u30e9\u30fc\uff08",L.errors.length,"\u4ef6\uff09"]}),(0,u.jsx)("ul",{children:L.errors.map((e,t)=>(0,u.jsxs)("li",{children:["\u884c ",e.rowIndex+2,": ",e.message]},t))})]})]}),L&&L.error&&(0,u.jsxs)("div",{style:{color:"red"},children:[(0,f.A)("common.errorPrefix"),L.error]})]}),(0,u.jsxs)("section",{style:d.B_,children:[(0,u.jsx)("h3",{children:(0,f.A)("admin.title.upsertManual")}),(0,u.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,u.jsxs)("label",{children:[(0,f.A)("admin.label.prizeIdShort"),(0,u.jsx)("input",{value:W,onChange:e=>V(e.target.value),placeholder:"B001",style:d.TH})]}),(0,u.jsxs)("label",{children:[(0,f.A)("admin.label.entryNumber"),(0,u.jsx)("input",{value:q,onChange:e=>K(e.target.value),placeholder:"001",style:d.TH})]}),(0,u.jsxs)("label",{children:[(0,f.A)("admin.label.password"),(0,u.jsx)("input",{value:Y,onChange:e=>Z(e.target.value),style:d.TH})]}),(0,u.jsxs)("label",{style:{userSelect:"none"},children:[(0,u.jsx)("input",{type:"checkbox",checked:X,onChange:e=>$(e.target.checked)}),"\xa0",(0,f.A)("admin.label.isWinner")]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("button",{type:"button",disabled:ee,onClick:async()=>{te(!0),ie("");try{if(!W||!q||!Y)throw new Error("\u8cde\u54c1ID / \u62bd\u9078\u756a\u53f7 / \u30d1\u30b9\u30ef\u30fc\u30c9 \u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");const e={prize_id:W.trim(),entry_number:q.trim(),password:Y,is_winner:!!X},t=await(0,m.vL)(e);ie("".concat((0,f.A)("admin.toast.upsertSuccess")," id=").concat(t.id," / ").concat(t.entry_number," \u2192 ").concat(t.is_winner?"\u5f53\u9078":"\u843d\u9078")),oe((0,f.A)("admin.toast.upsertSuccess"),"success")}catch(e){ie("".concat((0,f.A)("common.errorPrefix")).concat(e.message)),oe((0,f.A)("admin.toast.upsertFail"),"error")}finally{te(!1)}},style:d.ll,children:ee?(0,f.A)("admin.button.sending"):(0,f.A)("admin.button.upsert")}),ne&&(0,u.jsx)("span",{style:{marginLeft:8,fontSize:12},children:ne})]})]})]}),(0,u.jsxs)("section",{style:d.B_,children:[null===o&&(0,u.jsx)("p",{children:(0,f.A)("common.loading")}),Array.isArray(o)&&0===o.length&&(0,u.jsx)("p",{children:(0,f.A)("admin.state.noPrizes")}),Array.isArray(o)&&o.length>0&&(0,u.jsx)("ul",{style:{paddingLeft:16},children:de.map(e=>{const t=e.publish_time_utc?"\u516c\u958b\u65e5: ".concat(function(e){try{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString("ja-JP",{timeZone:"Asia/Tokyo",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).replace(/\u200E/g,"")}catch(t){return""}}(e.publish_time_utc)):l(e.result_time_jst),n=g(e.publish_time_utc,e.result_time_jst||e.publish_time_jst);return(0,u.jsx)("li",{style:{marginBottom:16,listStyle:"none",padding:16,border:"1px solid #eee",borderRadius:8},children:(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16,flexWrap:"wrap"},children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{style:{fontSize:16,fontWeight:600},children:[(0,u.jsx)("span",{style:{fontFamily:"monospace"},children:e.id})," ",e.name,(0,u.jsx)(h,{published:n}),(0,u.jsx)(b,{prizeId:e.id})]}),(0,u.jsx)("div",{children:t}),(0,u.jsxs)("div",{style:{marginTop:8,display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,u.jsx)(a.N_,{to:"/participant?prizeId=".concat(encodeURIComponent(e.id)),children:(0,f.A)("admin.link.participantPage")}),(0,u.jsx)("button",{type:"button",onClick:()=>(async e=>{if(e)try{const t=await(0,m.Fo)(e);oe((0,f.A)("admin.toast.publishUpdated",l(t.jst_view_from_utc).replace("\u516c\u958b\u65e5: ","")),"success"),await re()}catch(t){oe((0,f.A)("admin.toast.publishFail"),"error")}})(e.id),style:d.ll,children:(0,f.A)("admin.button.publishNow")})]})]}),(0,u.jsx)(p,{prize:e})]})},e.id)})})]}),ae&&(0,u.jsx)("div",{style:{position:"fixed",left:0,bottom:0,width:"100vw",zIndex:1100,display:"flex",justifyContent:"center",pointerEvents:"none"},children:(0,u.jsx)("div",{style:{background:"error"===ae.kind?"#fee2e2":"success"===ae.kind?"#dcfce7":"#f1f5f9",color:"error"===ae.kind?"#b91c1c":"success"===ae.kind?"#065f46":"#334155",border:"error"===ae.kind?"1px solid #fca5a5":"success"===ae.kind?"1px solid #86efac":"1px solid #cbd5e1",borderRadius:8,margin:16,padding:"16px 24px",fontSize:15,boxShadow:"0 2px 8px rgba(0,0,0,0.06)",pointerEvents:"auto"},children:ae.text})})]})]})}},9809:(e,t,n)=>{n.d(t,{A:()=>r});const i={app:{title:"\u914d\u5e03\u62bd\u9078\u30b7\u30b9\u30c6\u30e0",nav:{prizes:"\u62bd\u9078\u4e88\u5b9a\uff08\u53c2\u52a0\u8005\u5411\u3051\uff09",adminList:"\u7ba1\u7406\uff1a\u8cde\u54c1\u4e00\u89a7\u30fb\u4f5c\u6210",adminDebug:"\uff08\u958b\u767a\u8005\u5411\u3051\uff09\u30c7\u30d0\u30c3\u30b0"}},prizes:{title:"\u62bd\u9078\u4e88\u5b9a\uff08\u53c2\u52a0\u8005\u5411\u3051\uff09",note:"\u516c\u958b\u65e5\u6642\uff08JST\uff09\u4ee5\u964d\u306b\u3001\u5404\u8cde\u54c1\u30da\u30fc\u30b8\u3067\u62bd\u9078\u7d50\u679c\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002",empty:"\u73fe\u5728\u3001\u516c\u958b\u4e88\u5b9a\u306e\u62bd\u9078\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3057\u3070\u3089\u304f\u3057\u3066\u304b\u3089\u518d\u5ea6\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002",publishAt:e=>"\u516c\u958b\u65e5\u6642\uff08JST\uff09: ".concat(e),openParticipant:"\u53c2\u52a0\u8005\u30da\u30fc\u30b8\u3092\u958b\u304f",saveQrPng:"QR\u30b3\u30fc\u30c9\u3092PNG\u3067\u4fdd\u5b58",errorNetwork:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u6642\u9593\u3092\u304a\u3044\u3066\u518d\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002",errorGeneric:"\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u6642\u9593\u3092\u304a\u3044\u3066\u518d\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002"},participant:{title:"\u62bd\u9078\u7d50\u679c\u78ba\u8a8d",resultPrefix:"participant_text_v2".includes("participant_text_v2")?"\u5f53\u843d\u7d50\u679c\uff1a":"\u7d50\u679c\uff1a",prizeIdPrefix:"\u8cde\u54c1ID",prizeNamePrefix:"\u8cde\u54c1\u540d",publishedAtJST:"\u516c\u958b\u65e5\u6642\uff08JST\uff09",entryPlaceholder:"\u62bd\u9078\u756a\u53f7\uff08\u4f8b: 001\uff09",passwordPlaceholder:"\u30d1\u30b9\u30ef\u30fc\u30c9\uff08\u4f8b: 1111\uff09",submit:"\u62bd\u9078\u7d50\u679c\u3092\u78ba\u8a8d\u3059\u308b",labels:{entryNumber:"\u30a8\u30f3\u30c8\u30ea\u30fc\u756a\u53f7",password:"\u30d1\u30b9\u30ef\u30fc\u30c9"},hint:"\u30a8\u30f3\u30c8\u30ea\u30fc\u756a\u53f7\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u914d\u5e03\u7269\u306eQR\u30b3\u30fc\u30c9\u6a2a\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002",check:"\u7d50\u679c\u3092\u78ba\u8a8d\u3059\u308b",result:{win:e=>"\ud83c\udf89 \u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\u300c".concat(e,"\u300d\u306b\u5f53\u9078\u3057\u307e\u3057\u305f\uff01"),lose:e=>"\u6b8b\u5ff5\u306a\u304c\u3089\u300c".concat(e,"\u300d\u306b\u306f\u5f53\u9078\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u3002"),notPublished:"\u62bd\u9078\u7d50\u679c\u306f\u307e\u3060\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u516c\u958b\u65e5\u6642\uff08JST\uff09\u4ee5\u964d\u306b\u518d\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002",notFound:"\u30a8\u30f3\u30c8\u30ea\u30fc\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3002\u756a\u53f7\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002",required:"\u30a8\u30f3\u30c8\u30ea\u30fc\u756a\u53f7\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},form:{intro:"\u62bd\u9078\u756a\u53f7\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u7d50\u679c\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002",entryPlaceholder:"\u62bd\u9078\u756a\u53f7\uff08\u4f8b: 001\uff09",passwordPlaceholder:"\u30d1\u30b9\u30ef\u30fc\u30c9\uff08\u4f8b: 1111\uff09",submit:"\u62bd\u9078\u7d50\u679c\u3092\u78ba\u8a8d\u3059\u308b"},state:{noData:"\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\u3002"},prefix:{result:"\u7d50\u679c\uff1a",prizeId:"\u8cde\u54c1ID\uff1a"}},qr:{title:"QR\u30da\u30fc\u30b8",prizeIdPrefix:"\u8cde\u54c1ID",entryPlaceholder:"\u62bd\u9078\u756a\u53f7\uff08\u4f8b: 001\uff09",passwordPlaceholder:"\u30d1\u30b9\u30ef\u30fc\u30c9\uff08\u4f8b: 1111\uff09",submit:"\u62bd\u9078\u7d50\u679c\u3092\u78ba\u8a8d\u3059\u308b",errorNetwork:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u6642\u9593\u3092\u304a\u3044\u3066\u518d\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002",errorGeneric:"\u51e6\u7406\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u6642\u9593\u3092\u304a\u3044\u3066\u518d\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002"},admin:{title:{prizeList:"\u7ba1\u7406\uff1a\u8cde\u54c1\u4e00\u89a7\u30fb\u4f5c\u6210",createPrize:"\u8cde\u54c1\u306e\u65b0\u898f\u4f5c\u6210",upsertManual:"\u5358\u7968 UPSERT\uff08\u624b\u52d5\uff09",csvUpload:"\u53c2\u52a0\u8005\u30a8\u30f3\u30c8\u30ea\u30fc\u4e00\u62ec\u6295\u5165\uff08CSV\uff09"},label:{secret:"\u7ba1\u7406\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\uff08ADMIN_SECRET\uff09",unpublishedFirst:"\u672a\u516c\u958b\u3092\u4e0a\u306b\u4e26\u3079\u66ff\u3048\u308b",prizeId:"\u8cde\u54c1ID\uff08\u4f8b: B002\uff09",prizeName:"\u8cde\u54c1\u540d",publishAt:"\u516c\u958b\u65e5\u6642\uff08JST\uff09",targetPrizeId:"\u5bfe\u8c61\u306e\u8cde\u54c1ID",conflictPolicy:"\u91cd\u8907\u6642\u306e\u52d5\u4f5c",prizeIdShort:"\u8cde\u54c1ID",entryNumber:"\u62bd\u9078\u756a\u53f7",password:"\u30d1\u30b9\u30ef\u30fc\u30c9",isWinner:"\u5f53\u9078"},placeholder:{secret:"\u3053\u3053\u306b\u7ba1\u7406\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u5165\u529b\uff08\u30ed\u30fc\u30ab\u30eb\u4fdd\u5b58\uff09",prizeId:"B002",prizeName:"\u25cb\u25cb\u8cde"},help:{secret:"\u30d6\u30e9\u30a6\u30b6\u306e <code>localStorage</code> \u306b\u4fdd\u5b58\u3055\u308c\u3001\u7ba1\u7406API\u547c\u3073\u51fa\u3057\u6642\u306b <code>x-admin-secret</code> \u30d8\u30c3\u30c0\u3067\u9001\u4fe1\u3055\u308c\u307e\u3059\u3002",csvFormat:"CSV\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff081\u884c\u76ee\u306f\u5fc5\u305a\u30d8\u30c3\u30c0\uff09\uff1a",defaultTime:"\u30d2\u30f3\u30c8\uff1a\u521d\u671f\u5024\u306f\u73fe\u6642\u9593\uff0b1\u6642\u9593\uff08JST\uff09\u306e\u8868\u8a18\u3067\u3059\u3002"},hint:{defaultTime:"\u30d2\u30f3\u30c8\uff1a\u521d\u671f\u5024\u306f\u73fe\u6642\u9593\uff0b1\u6642\u9593\uff08JST\uff09\u306e\u8868\u8a18\u3067\u3059\u3002"},button:{creating:"\u4f5c\u6210\u4e2d\u2026",create:"\u4f5c\u6210\u3059\u308b",downloadSampleCsv:"\u30b5\u30f3\u30d7\u30ebCSV\u3092\u4fdd\u5b58",sending:"\u9001\u4fe1\u4e2d\u2026",upsert:"UPSERT \u5b9f\u884c",publishNow:"\u516c\u958b\u6642\u523b\u3092\u4eca\u306b\u3059\u308b"},option:{selectPrize:"-- \u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044 --",ignore:"\u65e2\u5b58\u3092\u7dad\u6301\uff08\u65b0\u898f\u306e\u307f\u8ffd\u52a0\uff09",upsert:"\u4e0a\u66f8\u304d\uff08\u30d1\u30b9\u30ef\u30fc\u30c9/\u5f53\u843d\u3092\u66f4\u65b0\uff09"},state:{uploading:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u4e2d\u2026",noPrizes:"\u8cde\u54c1\u304c\u3042\u308a\u307e\u305b\u3093\u3002"},link:{participantPage:"\u53c2\u52a0\u8005\u30da\u30fc\u30b8\u3092\u958b\u304f"},create:{section:"\u8cde\u54c1\u306e\u65b0\u898f\u4f5c\u6210",id:"\u8cde\u54c1ID\uff08\u4f8b: B002\uff09",name:"\u8cde\u54c1\u540d",publishAt:"\u516c\u958b\u65e5\u6642\uff08JST\uff09\u203b\u73fe\u5728\u6642\u523b\uff0b1\u6642\u9593\u304c\u521d\u671f\u5024",submit:"\u8cde\u54c1\u3092\u4f5c\u6210"},csv:{section:"\u53c2\u52a0\u8005\u30a8\u30f3\u30c8\u30ea\u30fc\u306e\u4e00\u62ec\u6295\u5165\uff08CSV\uff09",prizeId:"\u5bfe\u8c61\u306e\u8cde\u54c1ID\uff08\u4f8b: B001\uff09",modeKeep:"\u65e2\u5b58\u3092\u7dad\u6301\uff08\u65b0\u898f\u306e\u307f\u8ffd\u52a0\uff09",sampleTitle:"CSV\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff081\u884c\u76ee\u306f\u5fc5\u305a\u30d8\u30c3\u30c0\uff09\uff1a",sampleCode:"entry_number,password,is_winner\n001,1111,true\n002,2222,false"},card:{publishAt:e=>"\u516c\u958b\u65e5\u6642\uff08JST\uff09: ".concat(e),openParticipant:"\u53c2\u52a0\u8005\u30da\u30fc\u30b8\u3092\u958b\u304f",saveQrPng:"QR\u30b3\u30fc\u30c9\u3092PNG\u3067\u4fdd\u5b58",edit:"\u7de8\u96c6"},edit:{title:"\u7ba1\u7406\uff1a\u8cde\u54c1\u7de8\u96c6",name:"\u8cde\u54c1\u540d",publishAt:"\u516c\u958b\u65e5\u6642\uff08JST\uff09",save:"\u5909\u66f4\u3092\u4fdd\u5b58",delete:"\u3053\u306e\u8cde\u54c1\u3092\u524a\u9664",confirmDelete:"\u672c\u5f53\u306b\u524a\u9664\u3057\u307e\u3059\u304b\uff1f\u53c2\u52a0\u8005\u30a8\u30f3\u30c8\u30ea\u30fc\u3082\u524a\u9664\u3055\u308c\u307e\u3059\u3002"},toast:{saved:"\u4fdd\u5b58\u3057\u307e\u3057\u305f\u3002",created:"\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002",imported:"CSV\u3092\u53d6\u308a\u8fbc\u307f\u307e\u3057\u305f\u3002",authFail:"\u8a8d\u8a3c\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u7ba1\u7406\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002",network:"\u901a\u4fe1\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u6642\u9593\u3092\u304a\u3044\u3066\u518d\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002",invalid:"\u5165\u529b\u5185\u5bb9\u306b\u8aa4\u308a\u304c\u3042\u308a\u307e\u3059\u3002\u8d64\u3044\u9805\u76ee\u3092\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002",createSuccess:"\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002",createFail:"\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002",publishUpdated:e=>"\u516c\u958b\u6642\u523b\u3092\u66f4\u65b0: ".concat(e),publishFail:"\u516c\u958b\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002",csvResult:e=>"CSV\u51e6\u7406\u7d50\u679c: ".concat(e),csvFail:"CSV\u306e\u51e6\u7406\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002",upsertSuccess:"\u767b\u9332\u3057\u307e\u3057\u305f\u3002",upsertFail:"\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002",secretSaved:"\u7ba1\u7406\u8005\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u4fdd\u5b58\u3057\u307e\u3057\u305f\u3002",secretCleared:"\u7ba1\u7406\u8005\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002"}},common:{required:"\u5fc5\u9808",cancel:"\u30ad\u30e3\u30f3\u30bb\u30eb",close:"\u9589\u3058\u308b",loading:"\u8aad\u307f\u8fbc\u307f\u4e2d\u3067\u3059\u2026",retry:"\u518d\u8aad\u307f\u8fbc\u307f",errorPrefix:"\u30a8\u30e9\u30fc: ",network:"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u6642\u9593\u3092\u304a\u3044\u3066\u518d\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002",server:"\u30b5\u30fc\u30d0\u30fc\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u6642\u9593\u3092\u304a\u3044\u3066\u518d\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002"},format:{publishJst:e=>"\u516c\u958b\u65e5\u6642\uff08JST\uff09: ".concat(e)}},r=function(e){var t;const n=e.split(".");let r=i;for(const i of n){if(null==r)return e;r=r[i]}for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return"function"===typeof r?r(...s):null!==(t=r)&&void 0!==t?t:e}}}]);
//# sourceMappingURL=379.b8f11345.chunk.js.map